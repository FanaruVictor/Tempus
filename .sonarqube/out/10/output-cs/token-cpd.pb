¿
2D:\Tempus\Tempus.API\Controllers\BaseController.cs
	namespace 	
Tempus
 
. 
API 
. 
Controllers  
;  !
[ 
ApiController 
] 
[ 
Route 
( 
$str 
) 
] 
public 
class 
BaseController 
: 

Controller (
{ 
	protected 
readonly 
	IMediator  
	_mediator! *
;* +
public 

BaseController 
( 
	IMediator #
mediator$ ,
), -
{ 
	_mediator 
= 
mediator 
; 
} 
	protected"" 
ActionResult"" 
<"" 
T"" 
>"" 
HandleResponse"" ,
<"", -
T""- .
>"". /
(""/ 0
BaseResponse""0 <
<""< =
T""= >
>""> ?
response""@ H
)""H I
{## 
return$$ 
response$$ 
.$$ 

StatusCode$$ "
switch$$# )
{%% 	
CustomStatusCodes&& 
.&& 
Ok&&  
=>&&! #
Ok&&$ &
(&&& '
response&&' /
)&&/ 0
,&&0 1
CustomStatusCodes'' 
.'' 
NotFound'' &
=>''' )
NotFound''* 2
(''2 3
)''3 4
,''4 5
CustomStatusCodes(( 
.(( 

BadRequest(( (
=>(() +

BadRequest((, 6
(((6 7
response((7 ?
)((? @
,((@ A
_)) 
=>)) 

BadRequest)) 
()) 
response)) $
)))$ %
}** 	
;**	 

}++ 
},, Ü
8D:\Tempus\Tempus.API\Controllers\CategoriesController.cs
	namespace

 	
Tempus


 
.

 
API

 
.

 
Controllers

  
;

  !
public 
class  
CategoriesController !
:" #
BaseController$ 2
{ 
public 
 
CategoriesController 
(  
	IMediator  )
mediator* 2
)2 3
:4 5
base6 :
(: ;
mediator; C
)C D
{ 
} 
[ 
HttpGet 
] 
public   

async   
Task   
<   
ActionResult   "
<  " #
List  # '
<  ' (
BaseCategory  ( 4
>  4 5
>  5 6
>  6 7
GetAll  8 >
(  > ?
[  ? @
	FromQuery  @ I
]  I J!
GetAllCategoriesQuery  K `
query  a f
)  f g
=>!! 

HandleResponse!! 
(!! 
await!! 
	_mediator!!  )
.!!) *
Send!!* .
(!!. /
query!!/ 4
)!!4 5
)!!5 6
;!!6 7
[(( 
HttpGet(( 
((( 
$str(( 
)(( 
](( 
public)) 

async)) 
Task)) 
<)) 
ActionResult)) "
<))" #
BaseCategory))# /
>))/ 0
>))0 1
GetById))2 9
())9 :
[)): ;
	FromRoute)); D
]))D E
Guid))F J
id))K M
)))M N
=>** 

HandleResponse** 
(** 
await** 
	_mediator**  )
.**) *
Send*** .
(**. /
new**/ 2 
GetCategoryByIdQuery**3 G
{**G H
Id**H J
=**K L
id**M O
}**O P
)**P Q
)**Q R
;**R S
[11 
HttpPost11 
]11 
public22 

async22 
Task22 
<22 
ActionResult22 "
<22" #
BaseCategory22# /
>22/ 0
>220 1
Create222 8
(228 9
[229 :
FromBody22: B
]22B C!
CreateCategoryCommand22D Y
command22Z a
)22a b
=>33 

HandleResponse33 
(33 
await33 
	_mediator33  )
.33) *
Send33* .
(33. /
command33/ 6
)336 7
)337 8
;338 9
[:: 
HttpPut:: 
]:: 
public;; 

async;; 
Task;; 
<;; 
ActionResult;; "
<;;" #
BaseCategory;;# /
>;;/ 0
>;;0 1
Update;;2 8
(;;8 9
[;;9 :
FromBody;;: B
];;B C!
UpdateCategoryCommand;;D Y
command;;Z a
);;a b
=><< 

HandleResponse<< 
(<< 
await<< 
	_mediator<<  )
.<<) *
Send<<* .
(<<. /
command<</ 6
)<<6 7
)<<7 8
;<<8 9
[CC 

HttpDeleteCC 
(CC 
$strCC 
)CC 
]CC 
publicDD 

asyncDD 
TaskDD 
<DD 
ActionResultDD "
<DD" #
GuidDD# '
>DD' (
>DD( )
DeleteDD* 0
(DD0 1
[DD1 2
	FromRouteDD2 ;
]DD; <
GuidDD= A
idDDB D
)DDD E
=>EE 

HandleResponseEE 
(EE 
awaitEE 
	_mediatorEE  )
.EE) *
SendEE* .
(EE. /
newEE/ 2!
DeleteCategoryCommandEE3 H
{FF 	
IdGG 
=GG 
idGG 
}HH 	
)HH	 

)HH
 
;HH 
}II ¸#
;D:\Tempus\Tempus.API\Controllers\RegistrationsController.cs
	namespace 	
Tempus
 
. 
API 
. 
Controllers  
;  !
public 
class #
RegistrationsController $
:% &
BaseController' 5
{ 
public 
#
RegistrationsController "
(" #
	IMediator# ,
mediator- 5
)5 6
:7 8
base9 =
(= >
mediator> F
)F G
{ 
} 
[!! 
HttpGet!! 
]!! 
public"" 

async"" 
Task"" 
<"" 
ActionResult"" "
<""" #
List""# '
<""' (
RegistrationInfo""( 8
>""8 9
>""9 :
>"": ;
GetAll""< B
(""B C
[""C D
	FromQuery""D M
]""M N$
GetAllRegistrationsQuery""O g
query""h m
)""m n
=>""o q
HandleResponse	""r Ä
(
""Ä Å
await
""Å Ü
	_mediator
""á ê
.
""ê ë
Send
""ë ï
(
""ï ñ
query
""ñ õ
)
""õ ú
)
""ú ù
;
""ù û
[)) 
HttpGet)) 
()) 
$str)) 
))) 
])) 
public** 

async** 
Task** 
<** 
ActionResult** "
<**" # 
DetailedRegistration**# 7
>**7 8
>**8 9
GetById**: A
(**A B
[**B C
	FromRoute**C L
]**L M
Guid**N R
id**S U
)**U V
=>**W Y
HandleResponse**Z h
(**h i
await**i n
	_mediator**o x
.**x y
Send**y }
(**} ~
new	**~ Å&
GetRegistrationByIdQuery
**Ç ö
{
**õ ú
Id
**ù ü
=
**† °
id
**¢ §
}
**• ¶
)
**¶ ß
)
**ß ®
;
**® ©
[11 
HttpPost11 
]11 
public22 

async22 
Task22 
<22 
ActionResult22 "
<22" # 
DetailedRegistration22# 7
>227 8
>228 9
Create22: @
(22@ A
[22A B
FromBody22B J
]22J K%
CreateRegistrationCommand22L e
command22f m
)22m n
=>22o q
HandleResponse	22r Ä
(
22Ä Å
await
22Å Ü
	_mediator
22á ê
.
22ê ë
Send
22ë ï
(
22ï ñ
command
22ñ ù
)
22ù û
)
22û ü
;
22ü †
[99 
HttpPut99 
]99 
public:: 

async:: 
Task:: 
<:: 
ActionResult:: "
<::" # 
DetailedRegistration::# 7
>::7 8
>::8 9
Update::: @
(::@ A
[::A B
FromBody::B J
]::J K%
UpdateRegistrationCommand::L e
command::f m
)::m n
=>::o q
HandleResponse	::r Ä
(
::Ä Å
await
::Å Ü
	_mediator
::á ê
.
::ê ë
Send
::ë ï
(
::ï ñ
command
::ñ ù
)
::ù û
)
::û ü
;
::ü †
[AA 

HttpDeleteAA 
(AA 
$strAA 
)AA 
]AA 
publicBB 

asyncBB 
TaskBB 
<BB 
ActionResultBB "
<BB" #
GuidBB# '
>BB' (
>BB( )
DeleteBB* 0
(BB0 1
[BB1 2
	FromRouteBB2 ;
]BB; <
GuidBB= A
idBBB D
)BBD E
=>BBF H
HandleResponseCC 
(CC 
awaitCC 
	_mediatorCC &
.CC& '
SendCC' +
(CC+ ,
newCC, /%
DeleteRegistrationCommandCC0 I
{DD 	
IdEE 
=EE 
idEE 
}FF 	
)FF	 

)FF
 
;FF 
[LL 
HttpGetLL 
(LL 
$strLL 
)LL 
]LL 
publicMM 

asyncMM 
TaskMM 
<MM 
ActionResultMM "
<MM" # 
DetailedRegistrationMM# 7
>MM7 8
>MM8 9
GetLastUpdatedMM: H
(MMH I
)MMI J
=>MMK M
HandleResponseNN 
(NN 
awaitNN 
	_mediatorNN &
.NN& '
SendNN' +
(NN+ ,
newNN, /+
GetLastUpdatedRegsitrationQueryNN0 O
(NNO P
)NNP Q
)NNQ R
)NNR S
;NNS T
}OO Õ
3D:\Tempus\Tempus.API\Controllers\UsersController.cs
	namespace

 	
Tempus


 
.

 
API

 
.

 
Controllers

  
;

  !
public 
class 
UsersController 
: 
BaseController -
{ 
public 

UsersController 
( 
	IMediator $
mediator% -
)- .
:/ 0
base1 5
(5 6
mediator6 >
)> ?
{ 
} 
[ 
HttpGet 
] 
public 

async 
Task 
< 
ActionResult "
<" #
List# '
<' (
BaseUser( 0
>0 1
>1 2
>2 3
GetAll4 :
(: ;
); <
=>= ?
HandleResponse@ N
(N O
awaitO T
	_mediatorU ^
.^ _
Send_ c
(c d
newd g
GetAllUsersQueryh x
(x y
)y z
)z {
){ |
;| }
[%% 
HttpGet%% 
(%% 
$str%% 
)%% 
]%% 
public&& 

async&& 
Task&& 
<&& 
ActionResult&& "
<&&" #
BaseUser&&# +
>&&+ ,
>&&, -
GetById&&. 5
(&&5 6
[&&6 7
	FromRoute&&7 @
]&&@ A
Guid&&B F
id&&G I
)&&I J
=>&&K M
HandleResponse&&N \
(&&\ ]
await&&] b
	_mediator&&c l
.&&l m
Send&&m q
(&&q r
new&&r u
GetUserByIdQuery	&&v Ü
{
&&á à
Id
&&â ã
=
&&å ç
id
&&é ê
}
&&ë í
)
&&í ì
)
&&ì î
;
&&î ï
[.. 
HttpPost.. 
].. 
public// 

async// 
Task// 
<// 
ActionResult// "
<//" #
BaseUser//# +
>//+ ,
>//, -
Create//. 4
(//4 5
[//5 6
FromBody//6 >
]//> ?
CreateUserCommand//@ Q
command//R Y
)//Y Z
=>//[ ]
HandleResponse//^ l
(//l m
await//m r
	_mediator//s |
.//| }
Send	//} Å
(
//Å Ç
command
//Ç â
)
//â ä
)
//ä ã
;
//ã å
[66 
HttpPut66 
]66 
public77 

async77 
Task77 
<77 
ActionResult77 "
<77" #
BaseUser77# +
>77+ ,
>77, -
Update77. 4
(774 5
[775 6
FromBody776 >
]77> ?
UpdateUserCommand77@ Q
command77R Y
)77Y Z
=>77[ ]
HandleResponse77^ l
(77l m
await77m r
	_mediator77s |
.77| }
Send	77} Å
(
77Å Ç
command
77Ç â
)
77â ä
)
77ä ã
;
77ã å
[>> 

HttpDelete>> 
(>> 
$str>> 
)>> 
]>> 
public?? 

async?? 
Task?? 
<?? 
ActionResult?? "
<??" #
Guid??# '
>??' (
>??( )
Delete??* 0
(??0 1
[??1 2
	FromRoute??2 ;
]??; <
Guid??= A
id??B D
)??D E
=>??F H
HandleResponse@@ 
(@@ 
await@@ 
	_mediator@@ &
.@@& '
Send@@' +
(@@+ ,
new@@, /
DeleteUserCommand@@0 A
{AA 	
IdBB 
=BB 
idBB 
}CC 	
)CC	 

)CC
 
;CC 
}DD ¯"
D:\Tempus\Tempus.API\Program.cs
var		 
builder		 
=		 
WebApplication		 
.		 
CreateBuilder		 *
(		* +
args		+ /
)		/ 0
;		0 1
builder 
. 
Services 
. 
AddControllers 
(  
)  !
;! "
builder 
. 
Services 
. #
AddEndpointsApiExplorer (
(( )
)) *
;* +
builder 
. 
Services 
. 
AddDb 
( 
builder 
. 
Configuration ,
), -
;- .
builder 
. 
Services 
. -
!AddFluentValidationAutoValidation 2
(2 3
)3 4
;4 5
builder 
. 
Services 
. /
#AddValidatorsFromAssemblyContaining 4
<4 5&
CreateUserCommandValidator5 O
>O P
(P Q
)Q R
;R S
builder 
. 
Services 
. 
AddSwaggerGen 
( 
options &
=>' )
{ 
var 
xmlFilename 
= 
$" 
{ 
Assembly !
.! " 
GetExecutingAssembly" 6
(6 7
)7 8
.8 9
GetName9 @
(@ A
)A B
.B C
NameC G
}G H
$strH L
"L M
;M N
options 
. 
IncludeXmlComments 
( 
Path #
.# $
Combine$ +
(+ ,

AppContext, 6
.6 7
BaseDirectory7 D
,D E
xmlFilenameF Q
)Q R
)R S
;S T
} 
) 
; 
builder 
. 
Services 
. 

AddMediatR 
( 
typeof "
(" #
GetAllUsersQuery# 3
)3 4
.4 5
Assembly5 =
)= >
;> ?
var 
allowedCorsHosts 
= 
builder 
. 
Configuration ,
[, -
$str- ?
]? @
;@ A
builder 
. 
Services 
. 
AddCors 
( 
options $
=>% '
{ 
options 
. 
AddDefaultPolicy  
(  !
policyBuilder 
=> 
{   
policyBuilder!! 
.!! 
WithOrigins!! )
(!!) *
allowedCorsHosts!!* :
??!!; =
$str!!> A
)!!A B
;!!B C
policyBuilder"" 
."" 
AllowAnyHeader"" ,
("", -
)""- .
;"". /
policyBuilder## 
.## 
AllowAnyMethod## ,
(##, -
)##- .
;##. /
}$$ 
)$$ 
;$$ 
}%% 
)%% 
;%% 
var'' 
app'' 
='' 	
builder''
 
.'' 
Build'' 
('' 
)'' 
;'' 
if)) 
()) 
app)) 
.)) 
Environment)) 
.)) 
IsDevelopment)) !
())! "
)))" #
)))# $
{** 
app++ 
.++ 

UseSwagger++ 
(++ 
)++ 
;++ 
app,, 
.,, 
UseSwaggerUI,, 
(,, 
),, 
;,, 
}-- 
app// 
.// 
UseHttpsRedirection// 
(// 
)// 
;// 
app11 
.11 
UseCors11 
(11 
)11 
;11 
app33 
.33 
UseAuthorization33 
(33 
)33 
;33 
app55 
.55 
MapControllers55 
(55 
)55 
;55 
app77 
.77 
Run77 
(77 
)77 	
;77	 

public99 
partial99 
class99 
Program99 
{:: 
	protected;; 
Program;; 
(;; 
);; 
{<< 
}== 
}>> 